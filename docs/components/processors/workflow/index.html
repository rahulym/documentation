<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Yellow Messenger Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Yellow Messenger Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-135959729-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">workflow | Yellow Messenger</title><meta data-react-helmet="true" property="og:image" content="https://docs.yellowmessenger.com/img/og_img.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.yellowmessenger.com/img/og_img.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Yellow Messenger"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="workflow | Yellow Messenger"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><meta data-react-helmet="true" property="og:url" content="https://docs.yellowmessenger.com/docs/components/processors/workflow"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.yellowmessenger.com/docs/components/processors/workflow"><link rel="stylesheet" href="/styles.5559d08e.css">
<link rel="preload" href="/styles.e4d5cb5b.js" as="script">
<link rel="preload" href="/runtime~main.e88295cd.js" as="script">
<link rel="preload" href="/main.c8e4b053.js" as="script">
<link rel="preload" href="/1.5924ca73.js" as="script">
<link rel="preload" href="/2.b09603a0.js" as="script">
<link rel="preload" href="/333.fa5c3434.js" as="script">
<link rel="preload" href="/332.1fbf5b90.js" as="script">
<link rel="preload" href="/935f2afb.ad0a51ea.js" as="script">
<link rel="preload" href="/17896441.ea7c0357.js" as="script">
<link rel="preload" href="/2ebefae8.6f10e90b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/docs/about">Docs</a><a class="navbar__item navbar__link" href="/cookbooks">Cookbooks</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/videos">Videos</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/community">Community</a><a href="https://lab.benthos.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Lab</a><a href="https://github.com/Jeffail/benthos/releases/latest" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-download-link header-icon-link" aria-label="Download"></a><a href="https://github.com/Jeffail/benthos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link header-icon-link" aria-label="GitHub repository"></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/about">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/cookbooks">Cookbooks</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/videos">Videos</a></li><li class="menu__list-item"><a class="menu__link" href="/community">Community</a></li><li class="menu__list-item"><a href="https://lab.benthos.dev" target="_blank" rel="noopener noreferrer" class="menu__link">Lab</a></li><li class="menu__list-item"><a href="https://github.com/Jeffail/benthos/releases/latest" target="_blank" rel="noopener noreferrer" class="menu__link header-download-link header-icon-link" aria-label="Download"></a></li><li class="menu__list-item"><a href="https://github.com/Jeffail/benthos" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link header-icon-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/about">About</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/batching">Message Batching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/windowed_processing">Windowed Processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/metadata">Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/error_handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/interpolation">Interpolation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/field_paths">Field Paths</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/processing_pipelines">Processing Pipelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/unit_testing">Unit Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/configuration/dynamic_inputs_and_outputs">Dynamic Inputs and Outputs</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/http/about">HTTP</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Inputs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/amqp_0_9">amqp_0_9</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/amqp_1">amqp_1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/aws_kinesis">aws_kinesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/aws_s3">aws_s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/aws_sqs">aws_sqs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/azure_blob_storage">azure_blob_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/bloblang">bloblang</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/broker">broker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/csv">csv</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/dynamic">dynamic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/file">file</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/gcp_pubsub">gcp_pubsub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/hdfs">hdfs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/http_client">http_client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/http_server">http_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/inproc">inproc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/kafka">kafka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/kinesis">kinesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/mqtt">mqtt</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/nanomsg">nanomsg</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/nats">nats</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/nats_stream">nats_stream</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/nsq">nsq</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/read_until">read_until</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/redis_list">redis_list</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/redis_pubsub">redis_pubsub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/redis_streams">redis_streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/resource">resource</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/s3">s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/sequence">sequence</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/socket">socket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/socket_server">socket_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/sqs">sqs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/stdin">stdin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/subprocess">subprocess</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/websocket">websocket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/zmq4">zmq4</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Experimental</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/sftp">sftp</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/amqp">amqp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/files">files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/kafka_balanced">kafka_balanced</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/kinesis_balanced">kinesis_balanced</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/tcp">tcp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/tcp_server">tcp_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/inputs/udp_server">udp_server</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Processors</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/archive">archive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/avro">avro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/awk">awk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/aws_lambda">aws_lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/bloblang">bloblang</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/bounds_check">bounds_check</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/branch">branch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/cache">cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/catch">catch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/compress">compress</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/decompress">decompress</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/dedupe">dedupe</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/for_each">for_each</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/grok">grok</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/group_by">group_by</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/group_by_value">group_by_value</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/http">http</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/insert_part">insert_part</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/jmespath">jmespath</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/jq">jq</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/json_schema">json_schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/log">log</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/metric">metric</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/noop">noop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/parallel">parallel</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/parse_log">parse_log</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/protobuf">protobuf</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/rate_limit">rate_limit</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/redis">redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/resource">resource</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/select_parts">select_parts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/sleep">sleep</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/split">split</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/sql">sql</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/subprocess">subprocess</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/switch">switch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/sync_response">sync_response</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/throttle">throttle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/try">try</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/unarchive">unarchive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/while">while</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/components/processors/workflow">workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/processors/xml">xml</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/batch">batch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/conditional">conditional</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/decode">decode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/encode">encode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/filter">filter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/filter_parts">filter_parts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/hash">hash</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/hash_sample">hash_sample</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/json">json</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/lambda">lambda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/merge_json">merge_json</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/metadata">metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/number">number</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/process_batch">process_batch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/process_dag">process_dag</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/process_field">process_field</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/process_map">process_map</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/sample">sample</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/processors/text">text</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Outputs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/amqp_0_9">amqp_0_9</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/amqp_1">amqp_1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_dynamodb">aws_dynamodb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_kinesis">aws_kinesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_kinesis_firehose">aws_kinesis_firehose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_s3">aws_s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_sns">aws_sns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/aws_sqs">aws_sqs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/azure_blob_storage">azure_blob_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/azure_queue_storage">azure_queue_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/azure_table_storage">azure_table_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/broker">broker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/cache">cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/cassandra">cassandra</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/drop">drop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/drop_on">drop_on</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/dynamic">dynamic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/elasticsearch">elasticsearch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/file">file</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/gcp_pubsub">gcp_pubsub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/hdfs">hdfs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/http_client">http_client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/http_server">http_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/inproc">inproc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/kafka">kafka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/mqtt">mqtt</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/nanomsg">nanomsg</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/nats">nats</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/nats_stream">nats_stream</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/nsq">nsq</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/redis_hash">redis_hash</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/redis_list">redis_list</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/redis_pubsub">redis_pubsub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/redis_streams">redis_streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/reject">reject</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/resource">resource</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/retry">retry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/socket">socket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sql">sql</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/stdout">stdout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/subprocess">subprocess</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/switch">switch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sync_response">sync_response</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/try">try</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/websocket">websocket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/zmq4">zmq4</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Experimental</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sftp">sftp</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/amqp">amqp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/blob_storage">blob_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/drop_on_error">drop_on_error</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/dynamodb">dynamodb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/files">files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/kinesis">kinesis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/kinesis_firehose">kinesis_firehose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/s3">s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sns">sns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/sqs">sqs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/table_storage">table_storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/tcp">tcp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/outputs/udp">udp</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Caches</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/aws_dynamodb">aws_dynamodb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/aws_s3">aws_s3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/file">file</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/memcached">memcached</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/memory">memory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/multilevel">multilevel</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/redis">redis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/ristretto">ristretto</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/dynamodb">dynamodb</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/caches/s3">s3</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Rate Limits</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/rate_limits/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/rate_limits/local">local</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Buffers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/buffers/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/buffers/memory">memory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/buffers/none">none</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Metrics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/aws_cloudwatch">aws_cloudwatch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/http_server">http_server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/prometheus">prometheus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/statsd">statsd</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/stdout">stdout</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Experimental</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/influxdb">influxdb</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deprecated</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/blacklist">blacklist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/cloudwatch">cloudwatch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/rename">rename</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/metrics/whitelist">whitelist</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Tracers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/tracers/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/tracers/jaeger">jaeger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components/tracers/none">none</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/components/logger/about">Logger</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/getting_started">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Bloblang</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/bloblang/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/bloblang/functions">Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/bloblang/methods">Methods</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/bloblang/advanced">Advanced</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/monitoring">Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/performance_tuning">Performance Tuning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/sync_responses">Synchronous Responses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/aws">Amazon Web Services</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Serverless</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/serverless/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/serverless/lambda">Lambda</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Streams Mode</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/streams_mode/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/streams_mode/using_config_files">Streams Via Config Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/streams_mode/using_rest_api">Streams Via REST API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/streams_mode/streams_api">Streams API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Migration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/migration/v2">Migrating to Version 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/migration/v3">Migrating to Version 3</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">workflow</h1></header><div class="markdown"><p>BETA: This component is mostly stable but breaking changes could still be made outside of major version releases if a fundamental problem with the component is found.</p><p>Executes a topology of <a href="/docs/components/processors/branch"><code>branch</code> processors</a>,
performing them in parallel where possible.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1shy tabs__item--active">Common</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1shy">Advanced</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Common config fields, showing default values</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">workflow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">meta_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> meta.workflow</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># All config fields, showing default values</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">workflow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">meta_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> meta.workflow</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">branch_resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="why-use-a-workflow"></a>Why Use a Workflow<a class="hash-link" href="#why-use-a-workflow" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="performance"></a>Performance<a class="hash-link" href="#performance" title="Direct link to heading">#</a></h3><p>Most of the time the best way to compose processors is also the simplest, just configure them in series. This is because processors are often CPU bound, low-latency, and you can gain vertical scaling by increasing the number of processor pipeline threads, allowing Benthos to process <a href="/docs/configuration/processing_pipelines">multiple messages in parallel</a>.</p><p>However, some processors such as <a href="/docs/components/processors/http"><code>http</code></a>, <a href="/docs/components/processors/lambda"><code>lambda</code></a> or <a href="/docs/components/processors/cache"><code>cache</code></a> interact with external services and therefore spend most of their time waiting for a response. These processors tend to be high-latency and low CPU activity, which causes messages to process slowly.</p><p>When a processing pipeline contains multiple network processors that aren&#x27;t dependent on each other we can benefit from performing these processors in parallel for each individual message, reducing the overall message processing latency.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="simplifying-processor-topology"></a>Simplifying Processor Topology<a class="hash-link" href="#simplifying-processor-topology" title="Direct link to heading">#</a></h3><p>A workflow is often expressed as a <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank" rel="noopener noreferrer">DAG</a> of processing stages, where each stage can result in N possible next stages, until finally the flow ends at an exit node.</p><p>For example, if we had processing stages A, B, C and D, where stage A could result in either stage B or C being next, always followed by D, it might look something like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-text codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">     /--&gt; B --\</span></div><div class="token-line" style="color:#393A34"><span class="token plain">A --|          |--&gt; D</span></div><div class="token-line" style="color:#393A34"><span class="token plain">     \--&gt; C --/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This flow would be easy to express in a standard Benthos config, we could simply use a <a href="/docs/components/processors/switch"><code>switch</code> processor</a> to route to either B or C depending on a condition on the result of A. However, this method of flow control quickly becomes unfeasible as the DAG gets more complicated, imagine expressing this flow using switch processors:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-text codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">      /--&gt; B -------------|--&gt; D</span></div><div class="token-line" style="color:#393A34"><span class="token plain">     /                   /</span></div><div class="token-line" style="color:#393A34"><span class="token plain">A --|          /--&gt; E --|</span></div><div class="token-line" style="color:#393A34"><span class="token plain">     \--&gt; C --|          \</span></div><div class="token-line" style="color:#393A34"><span class="token plain">               \----------|--&gt; F</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And imagine doing so knowing that the diagram is subject to change over time. Yikes! Instead, with a workflow we can either trust it to automatically resolve the DAG or express it manually as simply as <code>order: [ [ A ], [ B, C ], [ E ], [ D, F ] ]</code>, and the conditional logic for determining if a stage is executed is defined as part of the branch itself.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fields"></a>Fields<a class="hash-link" href="#fields" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="meta_path"></a><code>meta_path</code><a class="hash-link" href="#meta_path" title="Direct link to heading">#</a></h3><p>A <a href="/docs/configuration/field_paths">dot path</a> indicating where to store and reference <a href="#structured-metadata">structured metadata</a> about the workflow execution.</p><p>Type: <code>string</code><br>
Default: <code>&quot;meta.workflow&quot;</code>  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="order"></a><code>order</code><a class="hash-link" href="#order" title="Direct link to heading">#</a></h3><p>An explicit declaration of branch ordered tiers, which describes the order in which parallel tiers of branches should be executed. Branches should be identified by the name as they are configured in the field <code>branches</code>. It&#x27;s also possible to specify branch processors configured <a href="#resources">as a resource</a>. </p><p>Type: <code>array</code><br>
Default: <code>[]</code>  </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Examples</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> foo</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> bar</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> baz</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> foo</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> bar</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> baz</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="branch_resources"></a><code>branch_resources</code><a class="hash-link" href="#branch_resources" title="Direct link to heading">#</a></h3><p>An optional list of <a href="/docs/components/processors/branch"><code>branch</code> processor</a> names that are configured as <a href="#resources">resources</a>. These resources will be included in the workflow with any branches configured inline within the <a href="#branches"><code>branches</code></a> field. The order and parallelism in which branches are executed is automatically resolved based on the mappings of each branch. When using resources with an explicit order it is not necessary to list resources in this field.</p><p>Type: <code>array</code><br>
Default: <code>[]</code><br>
Requires version 3.38.0 or newer  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="branches"></a><code>branches</code><a class="hash-link" href="#branches" title="Direct link to heading">#</a></h3><p>An object of named <a href="/docs/components/processors/branch"><code>branch</code> processors</a> that make up the workflow. The order and parallelism in which branches are executed can either be made explicit with the field <code>order</code>, or if omitted an attempt is made to automatically resolve an ordering based on the mappings of each branch.</p><p>Type: <code>object</code><br>
Default: <code>{}</code>  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1shy tabs__item--active">Automatic Ordering</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1shy">Conditional Branches</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1shy">Resources</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>When the field <code>order</code> is omitted a best attempt is made to determine a dependency tree between branches based on their request and result mappings. In the following example the branches foo and bar will be executed first in parallel, and afterwards the branch baz will be executed.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pipeline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">workflow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">meta_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> meta.workflow</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root = &quot;&quot;&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TODO</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">result_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root.foo = this&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root = this.body&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lambda</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TODO</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">result_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root.bar = this&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">baz</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              root.fooid = this.foo.id</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              root.barstuff = this.bar.content</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TODO</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> set</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">! json(&quot;fooid&quot;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">! json(&quot;barstuff&quot;) </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div><div role="tabpanel" hidden=""><p>Branches of a workflow are skipped when the <code>request_map</code> assigns <code>deleted()</code> to the root. In this example the branch A is executed when the document type is &quot;foo&quot;, and branch B otherwise. Branch C is executed afterwards and is skipped unless either A or B successfully provided a result at <code>tmp.result</code>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pipeline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">workflow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">A</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              root = if this.document.type != &quot;foo&quot; {</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  deleted()</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              }</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TODO</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">result_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root.tmp.result = this&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">B</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              root = if this.document.type == &quot;foo&quot; {</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  deleted()</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              }</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lambda</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TODO</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">result_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root.tmp.result = this&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">C</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              root = if this.tmp.result != null {</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  deleted()</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              }</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TODO_SOMEWHERE_ELSE</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">result_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root.tmp.result = this&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div><div role="tabpanel" hidden=""><p>The <code>order</code> field can be used in order to refer to <a href="#resources">branch processor resources</a>, this can sometimes make your pipeline configuration cleaner, as well as allowing you to reuse branch configurations in order places. It&#x27;s also possible to mix and match branches configured within the workflow and configured as resources.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pipeline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">workflow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">order</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bar </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> baz </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">bar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root = this.body&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lambda</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">function</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TODO</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">result_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root.bar = this&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">foo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root = &quot;&quot;&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TODO</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">result_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root.foo = this&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">baz</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">request_map</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          root.fooid = this.foo.id</span></div><div class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          root.barstuff = this.bar.content</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">processors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TODO</span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> set</span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">! json(&quot;fooid&quot;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">! json(&quot;barstuff&quot;) </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="structured-metadata"></a>Structured Metadata<a class="hash-link" href="#structured-metadata" title="Direct link to heading">#</a></h2><p>When the field <code>meta_path</code> is non-empty the workflow processor creates an object describing which workflows were successful, skipped or failed for each message and stores the object within the message at the end.</p><p>The object is of the following form:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;succeeded&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;skipped&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bar&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;failed&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;baz&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;the error message from the branch&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If a message already has a meta object at the given path when it is processed then the object is used in order to determine which branches have already been performed on the message (or skipped) and can therefore be skipped on this run.</p><p>This is a useful pattern when replaying messages that have failed some branches previously. For example, given the above example object the branches foo and bar would automatically be skipped, and baz would be reattempted.</p><p>The previous meta object will also be preserved in the field <code>&lt;meta_path&gt;.previous</code> when the new meta object is written, preserving a full record of all workflow executions.</p><p>If a field <code>&lt;meta_path&gt;.apply</code> exists in the meta object for a message and is an array then it will be used as an explicit list of stages to apply, all other stages will be skipped.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="resources"></a>Resources<a class="hash-link" href="#resources" title="Direct link to heading">#</a></h2><p>It&#x27;s common to configure processors (and other components) <a href="/docs/configuration/resources">as resources</a> in order to keep the pipeline configuration cleaner. With the workflow processor you can include branch processors configured as resources within your workflow either by specifying them by name in the field <code>order</code>, if Benthos doesn&#x27;t find a branch within the workflow configuration of that name it&#x27;ll refer to the resources.</p><p>Alternatively, if you do not wish to have an explicit ordering, you can add resource names to the field <code>branch_resources</code> and they will be included in the workflow with automatic DAG resolution along with any branches configured in the <code>branches</code> field.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="resource-error-conditions"></a>Resource Error Conditions<a class="hash-link" href="#resource-error-conditions" title="Direct link to heading">#</a></h3><p>There are two error conditions that could potentially occur when resources included in your workflow are mutated, and if you are planning to mutate resources in your workflow it is important that you understand them.</p><p>The first error case is that a resource in the workflow is removed and not replaced, when this happens the workflow will still be executed but the individual branch will fail. This should only happen if you explicitly delete a branch resource, as any mutation operation will create the new resource before removing the old one.</p><p>The second error case is when automatic DAG resolution is being used and a resource in the workflow is changed in a way that breaks the DAG (circular dependencies, etc). When this happens it is impossible to execute the workflow and therefore the processor will fail, which is possible to capture and handle using <a href="/docs/configuration/error_handling">standard error handling patterns</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="error-handling"></a>Error Handling<a class="hash-link" href="#error-handling" title="Direct link to heading">#</a></h2><p>The recommended approach to handle failures within a workflow is to query against the <a href="#structured-metadata">structured metadata</a> it provides, as it provides granular information about exactly which branches failed and which ones succeeded and therefore aren&#x27;t necessary to perform again.</p><p>For example, if our meta object is stored at the path <code>meta.workflow</code> and we wanted to check whether a message has failed for any branch we can do that using a <a href="/docs/guides/bloblang/about">Bloblang query</a> like <code>this.meta.workflow.failed.length() | 0 &gt; 0</code>, or to check whether a specific branch failed we can use <code>this.exists(&quot;meta.workflow.failed.foo&quot;)</code>.</p><p>However, if structured metadata is disabled by setting the field <code>meta_path</code> to empty then the workflow processor instead adds a general error flag to messages when any executed branch fails. In this case it&#x27;s possible to handle failures using <a href="/docs/configuration/error_handling">standard error handling patterns</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Jeffail/benthos/edit/master/website/docs/components/processors/workflow.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/components/processors/while"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label"> while</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/components/processors/xml"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">xml </div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-use-a-workflow" class="table-of-contents__link">Why Use a Workflow</a><ul><li><a href="#performance" class="table-of-contents__link">Performance</a></li><li><a href="#simplifying-processor-topology" class="table-of-contents__link">Simplifying Processor Topology</a></li></ul></li><li><a href="#fields" class="table-of-contents__link">Fields</a><ul><li><a href="#meta_path" class="table-of-contents__link"><code>meta_path</code></a></li><li><a href="#order" class="table-of-contents__link"><code>order</code></a></li><li><a href="#branch_resources" class="table-of-contents__link"><code>branch_resources</code></a></li><li><a href="#branches" class="table-of-contents__link"><code>branches</code></a></li></ul></li><li><a href="#examples" class="table-of-contents__link">Examples</a></li><li><a href="#structured-metadata" class="table-of-contents__link">Structured Metadata</a></li><li><a href="#resources" class="table-of-contents__link">Resources</a><ul><li><a href="#resource-error-conditions" class="table-of-contents__link">Resource Error Conditions</a></li></ul></li><li><a href="#error-handling" class="table-of-contents__link">Error Handling</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/guides/getting_started">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/videos">Videos</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community">Join the chat</a></li><li class="footer__item"><a href="https://github.com/Jeffail/benthos" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community">Get in touch</a></li><li class="footer__item"><a class="footer__link-item" href="/blobfish">Mascot</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright  2021 Yellow Messenger</div></div></div></footer></div>
<script src="/styles.e4d5cb5b.js"></script>
<script src="/runtime~main.e88295cd.js"></script>
<script src="/main.c8e4b053.js"></script>
<script src="/1.5924ca73.js"></script>
<script src="/2.b09603a0.js"></script>
<script src="/333.fa5c3434.js"></script>
<script src="/332.1fbf5b90.js"></script>
<script src="/935f2afb.ad0a51ea.js"></script>
<script src="/17896441.ea7c0357.js"></script>
<script src="/2ebefae8.6f10e90b.js"></script>
</body>
</html>