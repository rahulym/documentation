<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Yellow Messenger Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Yellow Messenger Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-135959729-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Yellow Messenger" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&family=Source+Sans+Pro&display=swap"><title data-react-helmet="true">Context Management | Yellow Messenger</title><meta data-react-helmet="true" property="og:image" content="https://docs.yellowmessenger.com/img/og_img.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.yellowmessenger.com/img/og_img.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Yellow Messenger"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="Context Management | Yellow Messenger"><meta data-react-helmet="true" name="description" content="How to add Contextual Responses?"><meta data-react-helmet="true" property="og:description" content="How to add Contextual Responses?"><meta data-react-helmet="true" property="og:url" content="https://docs.yellowmessenger.com/docs/howtos/context/add-contextual-response"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://docs.yellowmessenger.com/docs/howtos/context/add-contextual-response"><link rel="stylesheet" href="/styles.0a5177bf.css">
<link rel="preload" href="/styles.6811361d.js" as="script">
<link rel="preload" href="/runtime~main.1b7f6f86.js" as="script">
<link rel="preload" href="/main.3bbd770b.js" as="script">
<link rel="preload" href="/1.9ed3d867.js" as="script">
<link rel="preload" href="/2.53c7263c.js" as="script">
<link rel="preload" href="/97cc45c3.26692141.js" as="script">
<link rel="preload" href="/149.59bd0f31.js" as="script">
<link rel="preload" href="/935f2afb.f871e9f3.js" as="script">
<link rel="preload" href="/17896441.2ea94703.js" as="script">
<link rel="preload" href="/b4a4d2fe.f7913872.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/docs/documentation/concepts/overview">Documentation</a><a class="navbar__item navbar__link" href="/docs/developer/app/overview">Developer</a><a class="navbar__item navbar__link" href="/docs/cookbooks/Academy">Cookbooks</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/howtos/basics/create-a-bot">How to&#x27;s</a></div><div class="navbar__items navbar__items--right"><a href="https://community.yellowmessenger.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://cloud.yellowmessenger.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Sign up for free</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Yellow Messenger" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/documentation/concepts/overview">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/developer/app/overview">Developer</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/cookbooks/Academy">Cookbooks</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/howtos/basics/create-a-bot">How to&#x27;s</a></li><li class="menu__list-item"><a href="https://community.yellowmessenger.com" target="_blank" rel="noopener noreferrer" class="menu__link">Community</a></li><li class="menu__list-item"><a href="https://cloud.yellowmessenger.com" target="_blank" rel="noopener noreferrer" class="menu__link">Sign up for free</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Basic</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/create-a-bot">Create a bot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/signup-post-bot-invite">Accept Bot Invite</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/access-management">Access Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/add-faqs">FAQ Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/compare-code">Compare Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howtos/basics/variables-in-UI">Create and access journey variables in UI</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Create</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howtos/create/cloud-function">Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howtos/create/database-management">Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howtos/create/api-management">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howtos/create/localisation">Localisation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Context Management</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/howtos/context/add-contextual-response">Adding Contextual Responses</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Web-Widget</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howtos/design/setup-web-widget">Setup Web Widget</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Context Management</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-to-add-contextual-responses"></a>How to add Contextual Responses?<a class="hash-link" href="#how-to-add-contextual-responses" title="Direct link to heading">#</a></h3><p><strong>Keywords</strong> : contextual, why, what, how</p><p>Setting up contextual responses means adding more context to the response to a particular step. To simplify it further lets take an example<br>
<strong>Bot</strong> : Can you share your email with me?<br>
<del><strong>User</strong> : Sure, <a href="mailto:gooduser@email.com" target="_blank" rel="noopener noreferrer">gooduser@email.com</a></del><br>
<strong>Bot</strong> : Why do you need my email?  </p><p>What if instead of giving their email address during a conversation, customer asked <em>What is an email</em> Or <em>Why do you need my email</em>.
These type of contextual intents can be handled in the following ways :</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="first-way-of-adding-contextual-responses--adding-global-contextual-responses"></a>First Way of Adding Contextual Responses : Adding Global Contextual Responses<a class="hash-link" href="#first-way-of-adding-contextual-responses--adding-global-contextual-responses" title="Direct link to heading">#</a></h4><p>Setting up standard contextual responses for all steps in all journeys in the bot. Basically if the users ask Why/What/How/ etc at any step, the response will be the same. If you want the same, please follow the following steps : </p><p><code>Step 1</code> : On the Yellow Messenger Platform, under Studio &gt; Learn &gt; Context Management as shown below.
<img src="https://cdn.yellowmessenger.com/VcWZIGBahtyb1615525545331.png" alt="contextual"></p><p><code>Step 2</code> : You can change or add the responses for the various predefined contextual intents like What/Why/How/When/Where/etc.
<img src="https://cdn.yellowmessenger.com/lDKUvR0i95JI1615525572272.png" alt="contextual"></p><p><code>Step 3</code> : You can Bulk Upload and Export these intents and responses as well.
<img src="https://cdn.yellowmessenger.com/Cvhplh0fIFoc1615525606462.png" alt="contextual"></p><p><code>Step 4</code> : In order to add new intents click on <em> &#x27;+ Add Contextual Responses&#x27;</em>
<img src="https://cdn.yellowmessenger.com/grzVMIxid0Tr1615525631900.png" alt="contextual"></p><p><code>Step 5</code> : Add as many training utterances as possible, prompts that the user can type for a particular context. </p><p>Now when the user will ask for these questions [Why/What/How/etc] at any step during the conversation. The bot will be able to send these contexual responses to the user. </p><p>Please note that the user is not moving ahead while user is asking contextual responses. The user will remain at the same step untill the correct response if given. </p><p><img src="https://cdn.yellowmessenger.com/fZN8lIisIfxw1615525657154.png" alt="contextual"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="second-way-of-adding-contextual-responses--adding-step-contextual-responses"></a>Second Way of Adding Contextual Responses : Adding Step Contextual Responses<a class="hash-link" href="#second-way-of-adding-contextual-responses--adding-step-contextual-responses" title="Direct link to heading">#</a></h4><p>In case you want a different contextual response at every step in the bot, please follow the given steps : </p><p><code>Step 1</code> : Could not find this in the new platform UI. </p><p><code>Step 2</code> : </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-to-setup-context-at-any-step"></a>How to setup context at any step?<a class="hash-link" href="#how-to-setup-context-at-any-step" title="Direct link to heading">#</a></h3><blockquote><p>We humans are always aware of context. Even chatbots also store the context to maintain the state of conversation.
Conversations always happen on a particular topic (like intent), and it is a chain of texts (steps) exchanged between the user and the bot. So, this context keeps the conversation flowing.</p></blockquote><p>This context is stored as a JSON which is constantly updated at each and every step of a conversation. It stores all the info required to identify the state of a conversation, like the <em>step information</em> (visited steps), <em>intent name</em> (current intent) any many more.
It is available at app.context</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">app.context object</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   &quot;complete&quot;: true,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   &quot;steps&quot;: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        &quot;mobile_num&quot;: &quot;9999999999&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">       &quot;customer_id&quot;: &quot;-&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        &quot;otp&quot;: &quot;-&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    &quot;intent&quot;: &quot;login&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>At any point, you can access this object to do things like</p><ul><li>getting data of the steps</li><li>knowing the current status of the conversation ( Intent name &amp; the number of steps visited )</li><li>changing a step value</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="getting-data-of-the-steps"></a>Getting data of the steps<a class="hash-link" href="#getting-data-of-the-steps" title="Direct link to heading">#</a></h4><ul><li>app.context.steps is an object which contains key-value pairs of steps and the step values (user inputs) in the format step_name: step_value</li><li>A new step is added into app.context.steps only after the validation of that step.</li><li>When it hits an intent, this steps object is initially empty</li><li></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="getting-intent-name"></a>Getting Intent name<a class="hash-link" href="#getting-intent-name" title="Direct link to heading">#</a></h4><ul><li>app.context.intent contains the current intent name</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="other-data"></a>Other data<a class="hash-link" href="#other-data" title="Direct link to heading">#</a></h4><p>(Very limited use cases though)</p><ul><li>app.context.complete contains a boolean value. If it’s true then the intent is done with visiting all the steps</li><li>app.dataHistory contains an array of most recent incoming messages to the bot
In action function, you can make use of this app.context object to get all the required information to process the answer.</li></ul><p>A typical action function below</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">return new Promise(resolve =&gt; {</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // Getting the data from the steps</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    let otp = app.context.steps.otp</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    let mobile = app.context.steps[&#x27;mobile_number&#x27;] // another way of accessing data</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // API CALL which requires the above data</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // api logic here</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    app.sendTextMessage(&#x27;You have been successfully logged in&#x27;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    resolve();</span></div><div class="token-line" style="color:#393A34"><span class="token plain">});</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This object is always updated for every intent. When it hits another intent all the steps data will erased and the intent name will be changed.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/howtos/create/localisation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Localisation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/howtos/design/setup-web-widget"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Setup Web Widget »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-add-contextual-responses" class="table-of-contents__link">How to add Contextual Responses?</a></li><li><a href="#how-to-setup-context-at-any-step" class="table-of-contents__link">How to setup context at any step?</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/styles.6811361d.js"></script>
<script src="/runtime~main.1b7f6f86.js"></script>
<script src="/main.3bbd770b.js"></script>
<script src="/1.9ed3d867.js"></script>
<script src="/2.53c7263c.js"></script>
<script src="/97cc45c3.26692141.js"></script>
<script src="/149.59bd0f31.js"></script>
<script src="/935f2afb.f871e9f3.js"></script>
<script src="/17896441.2ea94703.js"></script>
<script src="/b4a4d2fe.f7913872.js"></script>
</body>
</html>